/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
'use strict';import _0x1a2e87 from'./../messagescompressor';import AddSuggestionMessage from'./messages/addsuggestionmessage';import AddSuggestionResponse from'./responses/addsuggestionresponse';import GetSuggestionMessage from'./messages/getsuggestionmessage';import GetSuggestionResponse from'./responses/getsuggestionresponse';import GetAllSuggestionsMessage from'./messages/getallsuggestionsmessage';import GetAllSuggestionsResponse from'./responses/getallsuggestionsresponse';import UpdateSuggestionMessage from'./messages/updatesuggestionmessage';import CKEditorCloudServicesError from'../ckeditorcloudserviceserror';export const _SERVICE=0xa;export default class{constructor(documentId,wsGateway){this['_wsGateway']=wsGateway,this['_documentId']=documentId;}async['add'](_0x43cf9e,type,data,originalSuggestionId=null){const _0x389df6=new AddSuggestionMessage(_0x43cf9e,this['_documentId'],type,data,originalSuggestionId),_0x407056=await this['_wsGateway']['_sendRequest'](0xa,AddSuggestionMessage['TYPE'],_0x1a2e87['encode'](_0x389df6));return _0x1a2e87['decode'](_0x407056,AddSuggestionResponse);}async['get'](_0xc8621b,attempt=0x1){const _0x39247f=new GetSuggestionMessage(_0xc8621b,this['_documentId']);try{const _0xdda69c=await this['_wsGateway']['_sendRequest'](0xa,GetSuggestionMessage['TYPE'],_0x1a2e87['encode'](_0x39247f));return _0x1a2e87['decode'](_0xdda69c,GetSuggestionResponse);}catch(_0x5047b4){if(_0x5047b4 instanceof CKEditorCloudServicesError&&'404'===_0x5047b4['code']&&attempt<0x5)return await(time=0x64*attempt,new Promise(_0xf8e0ea=>{setTimeout(_0xf8e0ea,time);})),await this['get'](_0xc8621b,attempt+0x1);if(_0x5047b4 instanceof CKEditorCloudServicesError)throw _0x5047b4;throw new CKEditorCloudServicesError(_0x5047b4['message'],this['_wsGateway']);}var time;}async['getAll'](){const _0x397a4d=new GetAllSuggestionsMessage(this['_documentId']),_0x561ff2=await this['_wsGateway']['_sendRequest'](0xa,GetAllSuggestionsMessage['TYPE'],_0x1a2e87['encode'](_0x397a4d)),{suggestions:suggestions}=_0x1a2e87['decode'](_0x561ff2,GetAllSuggestionsResponse);return suggestions;}['update'](_0x3bd74c,_0x2ba5b4={}){const {hasComments:hasComments,state:state}=_0x2ba5b4,isHasCommentsUpdated=void 0x0!==hasComments,_0x2f0f93=new UpdateSuggestionMessage(_0x3bd74c,this['_documentId'],hasComments,isHasCommentsUpdated,state);return this['_wsGateway']['_sendRequest'](0xa,UpdateSuggestionMessage['TYPE'],_0x1a2e87['encode'](_0x2f0f93));}static get['_SERVICE'](){return 0xa;}}