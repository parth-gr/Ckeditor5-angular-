/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x15fa=['EditorAnnotations','getRanges','customView','remove','keys','push','addSourceCollector','directChange','high','isReadOnly','view','listenTo','document','map','has','isCollapsed','change:isFocused','refresh','editor','delete','focusTracker','selectedViews','refreshSelectedViews','items','update','editorannotations-invalid-source-callback:\x20Function\x20required.','from','containsRange','add','get','cancel','editing','stop','set','element','function','plugins','activeView','selection'];(function(_0x2d3fc6,_0x48d1a4){const _0x4e525f=function(_0x1b11e9){while(--_0x1b11e9){_0x2d3fc6['push'](_0x2d3fc6['shift']());}};_0x4e525f(++_0x48d1a4);}(_0x15fa,0x9c));const _0x3ee9=function(_0x2d3fc6,_0x48d1a4){_0x2d3fc6=_0x2d3fc6-0x0;let _0x4e525f=_0x15fa[_0x2d3fc6];return _0x4e525f;};import _0x242707 from'@ckeditor/ckeditor5-core/src/plugin';import _0xcd6643 from'./annotations';import _0x67501a from'./inlineannotations';import _0x4c4c7f from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import{debounce as _0x59adfc}from'lodash-es';export default class l extends _0x242707{static get['requires'](){return[_0xcd6643,_0x67501a];}static get['pluginName'](){return _0x3ee9('0x0');}constructor(_0x401baa){super(_0x401baa),this['p']=new Set();}['init'](){const _0x418519=this[_0x3ee9('0x12')],_0x448bfd=_0x418519[_0x3ee9('0x24')][_0x3ee9('0x1d')]('Annotations'),_0x63b006=_0x418519['model'][_0x3ee9('0xc')][_0x3ee9('0x26')],_0x2a66ec=_0x59adfc(()=>this[_0x3ee9('0x16')](),0xa);_0x63b006['on']('change:range',(_0x54282a,_0x2afd7a)=>{_0x2afd7a[_0x3ee9('0x7')]&&(_0x2a66ec[_0x3ee9('0x1e')](),this[_0x3ee9('0x16')]());}),this[_0x3ee9('0xb')](_0x418519[_0x3ee9('0x1f')]['view'][_0x3ee9('0xc')],_0x3ee9('0x10'),(_0x4da4e2,_0x12ab68,_0x11a432)=>{_0x11a432&&_0x2a66ec();}),this[_0x3ee9('0xb')](_0x418519['ui']['focusTracker'],_0x3ee9('0x10'),(_0x1f3c55,_0x4bdacb,_0x302792)=>{_0x302792||_0x418519[_0x3ee9('0x9')]||this['g']['has'](_0x448bfd['activeView'])&&(_0x448bfd[_0x3ee9('0x25')]=null);}),_0x448bfd[_0x3ee9('0x14')]['on']('change:isFocused',(_0x13e71f,_0x471c84,_0x7a43c2)=>{!_0x7a43c2&&_0x418519[_0x3ee9('0x1f')][_0x3ee9('0xa')]['hasDomSelection']&&(_0x2a66ec['cancel'](),this[_0x3ee9('0x16')](),_0x13e71f[_0x3ee9('0x20')]());},{'priority':_0x3ee9('0x8')}),this[_0x3ee9('0xb')](this[_0x3ee9('0x12')]['ui'],_0x3ee9('0x18'),()=>_0x448bfd[_0x3ee9('0x11')]());const _0x22047e=new Set();this[_0x3ee9('0xb')](_0x448bfd[_0x3ee9('0x17')],'add',(_0xf4fec4,_0x2f5b23)=>{for(const _0x4ab0b1 of this['g'][_0x3ee9('0x4')]())if(_0x4ab0b1===_0x2f5b23[_0x3ee9('0x2')]){_0x418519['ui'][_0x3ee9('0x14')][_0x3ee9('0x1c')](_0x2f5b23[_0x3ee9('0x22')]),_0x22047e[_0x3ee9('0x1c')](_0x2f5b23);break;}}),this[_0x3ee9('0xb')](_0x448bfd[_0x3ee9('0x17')],_0x3ee9('0x3'),(_0x554e7b,_0x2a1cd4)=>{_0x22047e[_0x3ee9('0xe')](_0x2a1cd4)&&(_0x418519['ui'][_0x3ee9('0x14')][_0x3ee9('0x3')](_0x2a1cd4['element']),_0x22047e[_0x3ee9('0x13')](_0x2a1cd4));});}[_0x3ee9('0x6')](_0x22e680){if(_0x3ee9('0x23')!=typeof _0x22e680)throw new _0x4c4c7f(_0x3ee9('0x19'));this['p'][_0x3ee9('0x1c')](_0x22e680);}['refreshSelectedViews'](){const _0x53ff7c=this['editor'][_0x3ee9('0x24')]['get']('Annotations');_0x53ff7c[_0x3ee9('0x15')]=this['k'](),_0x53ff7c['activeView']=_0x53ff7c[_0x3ee9('0x15')][0x0]||null;}get['g'](){const _0x3451e6=new Map();for(const _0x1741f3 of Array[_0x3ee9('0x1a')](this['p']))for(const [_0x5e1e4d,_0x471d45]of _0x1741f3())_0x3451e6[_0x3ee9('0x21')](_0x5e1e4d,_0x471d45);return _0x3451e6;}['k'](){const _0x24976f=[],_0x548721=this[_0x3ee9('0x12')]['model'][_0x3ee9('0xc')][_0x3ee9('0x26')],_0x211c0f=Array[_0x3ee9('0x1a')](_0x548721[_0x3ee9('0x1')]());for(const [_0x40697f,_0x1f0530]of this['g']){const _0x5af11d=_0x2635c5(_0x1f0530);_0x5af11d&&_0x24976f[_0x3ee9('0x5')]([_0x40697f,_0x5af11d]);}function _0x2635c5(_0x503552){for(const _0x4a0f83 of _0x503552)for(const _0x2d25c1 of _0x211c0f)if(_0x4a0f83[_0x3ee9('0x1b')](_0x2d25c1,!_0x548721[_0x3ee9('0xf')]))return _0x4a0f83;return null;}return _0x24976f['sort']((_0x2ee492,_0x51151c)=>{const _0x40048c=_0x2ee492[0x1],_0x4324d7=_0x51151c[0x1];return _0x40048c[_0x3ee9('0x1b')](_0x4324d7)?0x1:_0x4324d7[_0x3ee9('0x1b')](_0x40048c)?-0x1:0x0;})[_0x3ee9('0xd')](_0x4290e2=>_0x4290e2[0x0]);}}