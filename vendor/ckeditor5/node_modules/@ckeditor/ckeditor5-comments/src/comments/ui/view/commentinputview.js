/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x2d74a4 from'@ckeditor/ckeditor5-ui/src/view';import kt from'@ckeditor/ckeditor5-ui/src/viewcollection';import pt from'../commenteditor/commenteditor';import _0x297635 from'@ckeditor/ckeditor5-ui/src/button/buttonview';import _0x335011 from'@ckeditor/ckeditor5-utils/src/focustracker';import gt from'@ckeditor/ckeditor5-ui/src/focuscycler';import _0x5e4b7d from'@ckeditor/ckeditor5-utils/src/keystrokehandler';import Bt from'@ckeditor/ckeditor5-core/theme/icons/check.svg';import Et from'@ckeditor/ckeditor5-core/theme/icons/cancel.svg';export default class yt extends _0x2d74a4{constructor(_0x47a56d,_0x5739e3={}){super(_0x47a56d);const {t:t}=_0x47a56d;this['editor']=new pt(_0x5739e3),this['keystrokes']=new _0x5e4b7d(),this['focusTracker']=new _0x335011(),this['set']('value',_0x5739e3['initialData']||''),this['set']('disabledSubmit',!0x1),this['set']('showButtons',!0x0),this['set']('placeholder',t('Reply...')),this['submitButtonView']=this['kt'](),this['cancelButtonView']=this['bt'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck-comment__input-wrapper']},'children':[{'tag':'div','attributes':{'class':['ck-comment__input-actions',this['bindTemplate']['if']('showButtons','ck-comment__input-actions--active')]},'children':[this['submitButtonView'],this['cancelButtonView']]}]}),this['keystrokes']['set']('Esc',(_0x20ecfd,_0x5cb72a)=>{this['cancelButtonView']['fire']('execute'),_0x5cb72a();}),this['on']('submit',(_0xd507d7,_0x1c7189)=>{_0x1c7189['length']>0xfa0?(alert(t({'string':'Comment\x20content\x20is\x20too\x20long.\x20Your\x20comment\x20has\x20%0\x20characters\x20but\x20the\x20limit\x20is\x20%1\x20characters.','id':'TOO_LONG_COMMENT_ALERT'},[_0x1c7189['length'],0xfa0])),_0xd507d7['stop']()):this['editor']['setData']('');},{'priority':'high'});}['render'](){super['render']();const {editor:_0x3590d2,element:_0x36b9f9}=this;this['keystrokes']['listenTo'](_0x36b9f9),this['focusTracker']['add'](_0x36b9f9),_0x3590d2['create']()['then'](()=>{_0x36b9f9['insertBefore'](_0x3590d2['ui']['element'],_0x36b9f9['firstChild']),_0x3590d2['model']['document']['on']('change',()=>this['value']=_0x3590d2['getData']()),_0x3590d2['bind']('placeholder')['to'](this),this['ft'](_0x3590d2),this['fire']('editorReady');});}['focus'](){this['editor']['focus']();}['destroy'](){return this['_t']?Promise['resolve']():(this['_t']=!0x0,this['isRendered']?this['editor']['destroy']()['then'](()=>super['destroy']()):Promise['resolve'](super['destroy']()));}['kt'](){const _0x17672d=new _0x297635(this['locale']),{t:t}=this['locale'];return _0x17672d['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--submit']}}),_0x17672d['label']=t('Submit'),_0x17672d['icon']=Bt,_0x17672d['on']('execute',()=>{this['fire']('submit',this['value']);}),_0x17672d['bind']('isEnabled')['to'](this,'value',this,'disabledSubmit',(_0x379ce3,_0x55cab7)=>!_0x55cab7&&!!_0x379ce3['trim']()),_0x17672d;}['bt'](){const _0x2bdfd7=new _0x297635(this['locale']),{t:t}=this['locale'];return _0x2bdfd7['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--cancel']}}),_0x2bdfd7['label']=t('Cancel'),_0x2bdfd7['icon']=Et,_0x2bdfd7['on']('execute',()=>{this['editor']['setData'](''),this['fire']('cancel');}),_0x2bdfd7;}['ft'](_0x23b772){const _0x2f704e=this['focusTracker'],_0x10d313=new kt();[_0x23b772['ui']['view'],this['submitButtonView'],this['cancelButtonView']]['forEach'](_0x5b2792=>{_0x10d313['add'](_0x5b2792),_0x2f704e['add'](_0x5b2792['element']);});const _0x5057d5=new gt({'focusables':_0x10d313,'focusTracker':_0x2f704e});this['keystrokes']['set']('tab',(_0xcfa7ff,_0x36167e)=>{_0x5057d5['focusNext'](),_0x36167e();},{'priority':'low'}),this['keystrokes']['set']('shift\x20+\x20tab',(_0x44ee02,_0x2051c3)=>{_0x5057d5['focusPrevious'](),_0x2051c3();},{'priority':'low'});}}