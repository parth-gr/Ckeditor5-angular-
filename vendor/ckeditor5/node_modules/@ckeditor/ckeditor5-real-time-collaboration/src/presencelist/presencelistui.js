/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1c4d=['lastConnectedUsers','usersCount','context','number','presenceList.container','showDropdown','bind','render','presenceList','using','define','bodyCollection','presenceList.collapseAt','appendChild','remove','isCollapsed','get','isHidden','locale','content','listenTo','from','element','presenceDropdownView','view','items','destroy','allConnectedUsers','detachFromDom','balloonPanelView','length','set','execute','config','attachToDom','plugins','inlineListView','presenceList:\x20collapseAt\x20must\x20be\x20higher\x20than\x200.','unpin','onClick','isVisible','isRendered','reverse','add','bindTo'];(function(_0x2702ad,_0x4861fe){const _0x38b70c=function(_0x264e66){while(--_0x264e66){_0x2702ad['push'](_0x2702ad['shift']());}};_0x38b70c(++_0x4861fe);}(_0x1c4d,0x85));const _0x44c7=function(_0x2702ad,_0x4861fe){_0x2702ad=_0x2702ad-0x0;let _0x38b70c=_0x1c4d[_0x2702ad];return _0x38b70c;};import _0x27ac7b from'@ckeditor/ckeditor5-core/src/contextplugin';import _0x489fe3 from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import _0x133d86 from'@ckeditor/ckeditor5-utils/src/collection';import _0x5dc928 from'@ckeditor/ckeditor5-ui/src/bindings/clickoutsidehandler';import _0x5b15ad from'@ckeditor/ckeditor5-ui/src/editorui/bodycollection';import{isElement as _0x3c1b7c}from'lodash-es';import _0x2edeb9 from'../realtimecollaborativeediting/sessions';import _0x3dc471 from'./view/presencelistview';import _0x1f3eba from'./view/presencedropdownlistview';import _0x3a8044 from'./view/presencedropdownlistitemview';import _0x392875 from'./view/presenceinlinelistitemview';import _0xf99339 from'@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview';export default class i extends _0x27ac7b{constructor(_0x4ac4fa){if(super(_0x4ac4fa),_0x4ac4fa['config'][_0x44c7('0xc')](_0x44c7('0xa'),{'collapseAt':0x6}),_0x44c7('0x5')!=typeof _0x4ac4fa[_0x44c7('0x23')][_0x44c7('0x12')]('presenceList.collapseAt'))throw new _0x489fe3('presenceList:\x20collapseAt\x20must\x20be\x20a\x20number.',this);if(_0x4ac4fa[_0x44c7('0x23')][_0x44c7('0x12')](_0x44c7('0xe'))<0x1)throw new _0x489fe3(_0x44c7('0x27'),this);}static get['requires'](){return[_0x2edeb9];}['init'](){const _0x16c1ff=this[_0x44c7('0x4')];this['i']=_0x16c1ff[_0x44c7('0x25')][_0x44c7('0x12')](_0x2edeb9)[_0x44c7('0x1d')],this[_0x44c7('0x21')]('usersCount',0x0),this['lastConnectedUsers']=new _0x133d86(),this[_0x44c7('0x1f')]=new _0xf99339(),this['balloonPanelView']['class']='ck\x20ck-presence-list__balloon',this[_0x44c7('0x1a')]=this['s'](),this[_0x44c7('0x19')]=void 0x0;for(const _0x384ba1 of this['i'])this['o'](_0x384ba1);this['listenTo'](this['i'],_0x44c7('0x0'),(_0x427541,_0x480f41)=>{this['o'](_0x480f41);}),this[_0x44c7('0x16')](this['i'],_0x44c7('0x10'),(_0x36cf75,_0x46aa90)=>{this['h'](_0x46aa90);});}['s'](){const _0x24c7cd=this['context'],_0x26e3ba=new _0x3dc471(this[_0x44c7('0x4')][_0x44c7('0x14')]),_0x50e110=this[_0x44c7('0x1f')];if(!_0x3c1b7c(_0x24c7cd[_0x44c7('0x23')][_0x44c7('0x12')](_0x44c7('0x6'))))throw new _0x489fe3('presenceList:\x20Missing\x20container\x20element.',this);return _0x26e3ba['counterView'][_0x44c7('0x8')](_0x44c7('0x3'))['to'](this),_0x26e3ba[_0x44c7('0x8')](_0x44c7('0x11'))['to'](this,'usersCount',_0xa0d64c=>{const _0x28ccef=_0xa0d64c>=_0x24c7cd[_0x44c7('0x23')][_0x44c7('0x12')](_0x44c7('0xe'));return _0x26e3ba['counterView'][_0x44c7('0x13')]=!(0x1==_0xa0d64c||_0x28ccef),_0x28ccef||this['hideDropdown'](),_0x28ccef;}),_0x26e3ba[_0x44c7('0x26')][_0x44c7('0x1b')][_0x44c7('0x1')](this['lastConnectedUsers'])[_0x44c7('0xb')](_0x3df097=>{const _0x4cfd88=_0x24c7cd[_0x44c7('0x23')][_0x44c7('0x12')]('presenceList'),_0x5190a5=new _0x392875(_0x24c7cd[_0x44c7('0x14')],_0x3df097,_0x4cfd88[_0x44c7('0x29')]);return _0x4cfd88[_0x44c7('0x29')]&&this[_0x44c7('0x16')](_0x5190a5,_0x44c7('0x22'),()=>{this[_0x44c7('0x1a')][_0x44c7('0x11')]||_0x4cfd88[_0x44c7('0x29')](_0x3df097,_0x5190a5['element']);}),_0x5190a5;}),this[_0x44c7('0x16')](_0x26e3ba[_0x44c7('0x26')],'execute',()=>{this[_0x44c7('0x19')]?this['hideDropdown']():this[_0x44c7('0x1a')][_0x44c7('0x11')]&&this[_0x44c7('0x7')]();}),_0x26e3ba[_0x44c7('0x9')](),_0x50e110[_0x44c7('0x9')](),_0x5dc928({'emitter':_0x26e3ba,'activator':()=>_0x50e110[_0x44c7('0x2a')],'contextElements':[_0x50e110[_0x44c7('0x18')],_0x26e3ba[_0x44c7('0x26')][_0x44c7('0x18')]],'callback':()=>this['hideDropdown']()}),_0x24c7cd[_0x44c7('0x23')]['get'](_0x44c7('0x6'))[_0x44c7('0xf')](_0x26e3ba[_0x44c7('0x18')]),this['bodyCollection']=new _0x5b15ad(this['context']['locale']),this[_0x44c7('0xd')][_0x44c7('0x24')](),this[_0x44c7('0xd')]['add'](_0x50e110),_0x26e3ba;}['o'](_0x309256){this[_0x44c7('0x3')]++,0x5==this[_0x44c7('0x2')]['length']&&this[_0x44c7('0x2')][_0x44c7('0x10')](0x0),this[_0x44c7('0x2')][_0x44c7('0x0')](_0x309256);}['h'](_0x1c318e){if(this[_0x44c7('0x3')]--,this['lastConnectedUsers'][_0x44c7('0x12')](_0x1c318e['id'])&&(this[_0x44c7('0x2')][_0x44c7('0x10')](_0x1c318e['id']),this[_0x44c7('0x2')][_0x44c7('0x20')]<this[_0x44c7('0x3')]))for(const _0x58c6d0 of Array[_0x44c7('0x17')](this['i'])[_0x44c7('0x2c')]())if(!this[_0x44c7('0x2')]['get'](_0x58c6d0['id']))return void this['lastConnectedUsers']['add'](_0x58c6d0,0x0);}[_0x44c7('0x7')](){if(this[_0x44c7('0x19')])return;this[_0x44c7('0x19')]=new _0x1f3eba();const _0x39aa12=this[_0x44c7('0x4')][_0x44c7('0x23')][_0x44c7('0x12')]('presenceList');this[_0x44c7('0x19')][_0x44c7('0x1b')][_0x44c7('0x1')](this['i'])['using'](_0x558b25=>{const _0x3821b8=new _0x3a8044(this['context'][_0x44c7('0x14')],_0x558b25,!!_0x39aa12[_0x44c7('0x29')]);return _0x39aa12[_0x44c7('0x29')]&&this['listenTo'](_0x3821b8,_0x44c7('0x22'),()=>{_0x39aa12[_0x44c7('0x29')](_0x558b25,_0x3821b8[_0x44c7('0x18')]);}),_0x3821b8;}),this[_0x44c7('0x1f')]['content'][_0x44c7('0x0')](this['presenceDropdownView']),this[_0x44c7('0x1f')]['pin']({'target':this[_0x44c7('0x1a')]['inlineListView']['element']});}['hideDropdown'](){this[_0x44c7('0x19')]&&(this[_0x44c7('0x1f')][_0x44c7('0x28')](),this[_0x44c7('0x1f')][_0x44c7('0x15')][_0x44c7('0x10')](this['presenceDropdownView']),this['presenceDropdownView']['destroy'](),this[_0x44c7('0x19')]=void 0x0);}[_0x44c7('0x1c')](){super[_0x44c7('0x1c')](),this[_0x44c7('0x1a')]&&this[_0x44c7('0x1a')][_0x44c7('0x2b')]&&this[_0x44c7('0x1a')][_0x44c7('0x1c')](),this['bodyCollection']&&this[_0x44c7('0xd')][_0x44c7('0x1e')]();}}