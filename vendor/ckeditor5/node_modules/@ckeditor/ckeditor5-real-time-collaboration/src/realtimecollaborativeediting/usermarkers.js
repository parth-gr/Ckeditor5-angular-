/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x4414=['clear','detach','getStart','isSimilar','markers','getRange','getFirstRange','createUserMarkerOperations','document','update:user','user:position','render','toDomElement','parent','get','set','getNearestSelectionRange','user:range','getUserBySessionId','deletionPosition','requires','color','checkChild','change:range','userPositionMarker','data-session-id','getSelectionClass','change','setCustomProperty','isLimit','model','view','name','editingDowncast','start','getAttribute','$graveyard','getFirstPosition','priority','span','createUIElement','createRange','innerHTML','root','delete','markerToHighlight','hasDomSelection','end','addMarker','UserMarkers','split','schema','ck-user__selection','removeMarker','has','ck-user__marker\x20','selection','editing','markerName','getCustomProperty','user:position:','transparent','fromRange','size','getMarkerClass','mySessionId','plugins','&#8203;<span\x20class=\x22ck-user__marker-line\x22><span\x20class=\x22ck-user__marker-dot\x22></span></span>','updateMarker','rootName','markerToElement','enqueueChange','$text','orderNumber'];(function(_0x92ebfb,_0x179d27){const _0x514c50=function(_0x45e0cc){while(--_0x45e0cc){_0x92ebfb['push'](_0x92ebfb['shift']());}};_0x514c50(++_0x179d27);}(_0x4414,0x137));const _0x49fa=function(_0x92ebfb,_0x179d27){_0x92ebfb=_0x92ebfb-0x0;let _0x514c50=_0x4414[_0x92ebfb];return _0x514c50;};import _0x37a2a3 from'@ckeditor/ckeditor5-core/src/plugin';import _0x50514f from'./sessions';import _0x3a538a from'@ckeditor/ckeditor5-engine/src/model/liverange';import'../../theme/usermarkers.css';export default class O extends _0x37a2a3{static get[_0x49fa('0x5')](){return[_0x50514f];}static get['pluginName'](){return _0x49fa('0x22');}['init'](){const _0x26c179=this['editor'],_0x304967=_0x26c179['plugins'][_0x49fa('0x49')](_0x50514f);_0x26c179['conversion']['for'](_0x49fa('0x12'))[_0x49fa('0x37')]({'model':_0x49fa('0x45'),'view':(_0x2e83a9,_0x15e5e1)=>function(_0x425b05,_0x1d7427,_0x4c9975,_0x32bfb0){const _0x4c209d=_0x425b05[_0x49fa('0x2b')][_0x49fa('0x23')](':')[0x2],_0x1bc228=_0x4c9975[_0x49fa('0x3')](_0x4c209d);if(!_0x1bc228||_0x4c209d===_0x4c9975['mySessionId'])return;if(!_0x32bfb0['model'][_0x49fa('0x24')][_0x49fa('0x7')](_0x425b05['markerRange']['start'],_0x49fa('0x39')))return;const _0x27941e={'class':_0x49fa('0x28')+_0x1bc228['color'][_0x49fa('0x31')](),'data-name':_0x1bc228[_0x49fa('0x11')],'data-session-id':_0x4c209d},_0x16fc72=_0x32bfb0[_0x49fa('0xf')][_0x49fa('0x3f')][_0x49fa('0x49')](_0x425b05[_0x49fa('0x2b')])[_0x49fa('0x3d')]()[_0x49fa('0x48')];_0x32bfb0[_0x49fa('0xf')][_0x49fa('0x24')][_0x49fa('0xe')](_0x16fc72)&&!_0x32bfb0[_0x49fa('0xf')]['hasContent'](_0x16fc72)&&(_0x27941e['contenteditable']=!0x1);const _0x4feb63=function(_0xa40a0,_0x4abce5){const _0x225b2c=_0xa40a0[_0x49fa('0x19')](_0x49fa('0x18'),_0x4abce5);return _0xa40a0[_0x49fa('0xd')](_0x49fa('0x9'),!0x0,_0x225b2c),_0x225b2c[_0x49fa('0x46')]=function(_0x15a768){const _0x1b4782=this[_0x49fa('0x47')](_0x15a768);return _0x1b4782[_0x49fa('0x1b')]=_0x49fa('0x34'),_0x1b4782;},_0x225b2c[_0x49fa('0x3e')]=function(_0x16a900){return this[_0x49fa('0x2c')](_0x49fa('0x9'))&&_0x16a900[_0x49fa('0x2c')](_0x49fa('0x9'))&&this['getAttribute'](_0x49fa('0xa'))==_0x16a900[_0x49fa('0x14')](_0x49fa('0xa'));},_0x225b2c;}(_0x1d7427,_0x27941e);return _0x4feb63[_0x49fa('0x17')]=0x3e8+_0x1bc228[_0x49fa('0x3a')],_0x4feb63;}(_0x2e83a9,_0x15e5e1,_0x304967,_0x26c179)}),_0x26c179['conversion']['for'](_0x49fa('0x12'))[_0x49fa('0x1e')]({'model':_0x49fa('0x2'),'view':_0x491089=>function(_0x39c056,_0x50e319){const _0x575a56=_0x39c056[_0x49fa('0x2b')][_0x49fa('0x23')](':')[0x2];if(_0x575a56===_0x50e319['mySessionId'])return;const _0x45f974=_0x50e319[_0x49fa('0x3')](_0x575a56);if(!_0x45f974)return{'id':_0x575a56};return{'id':_0x575a56,'classes':[_0x49fa('0x25'),_0x45f974[_0x49fa('0x6')][_0x49fa('0xb')]()],'attributes':{'data-session-id':_0x575a56},'priority':0x7d0+_0x45f974['orderNumber']};}(_0x491089,_0x304967)}),function(_0x416d1c){const _0x41863c=_0x416d1c[_0x49fa('0xf')],_0x4065af=new Map(),_0x2e9626=_0x416d1c[_0x49fa('0x33')][_0x49fa('0x49')](_0x50514f);_0x41863c['markers']['on'](_0x49fa('0x44'),(_0x353e4e,_0x99e77f,_0x491848,_0x41658d)=>{if(!_0x41658d)return void _0x4065af[_0x49fa('0x1d')](_0x99e77f[_0x49fa('0x11')]);_0x99e77f['name'][_0x49fa('0x23')](':')[0x2]!==_0x2e9626[_0x49fa('0x32')]&&_0x99e77f['on'](_0x49fa('0x8'),(_0x58234c,_0x244da5,_0x2afa71)=>{if(_0x49fa('0x15')!=_0x244da5[_0x49fa('0x1c')][_0x49fa('0x36')]&&_0x49fa('0x15')==_0x99e77f[_0x49fa('0x40')]()[_0x49fa('0x1c')]['rootName']&&!_0x4065af[_0x49fa('0x27')](_0x99e77f[_0x49fa('0x11')])){const _0x21eff3=_0x41863c[_0x49fa('0x24')][_0x49fa('0x1')](_0x2afa71['deletionPosition']);if(_0x21eff3){const _0x41f885=_0x3a538a[_0x49fa('0x2f')](_0x21eff3);_0x4065af[_0x49fa('0x0')](_0x99e77f[_0x49fa('0x11')],_0x41f885),_0x41f885['on'](_0x49fa('0x8'),(_0x12eced,_0x3a6c81,_0x398c57)=>{if('$graveyard'==_0x41f885['root'][_0x49fa('0x36')]){const _0x6b28ce=_0x41863c[_0x49fa('0x24')][_0x49fa('0x1')](_0x398c57[_0x49fa('0x4')]);_0x6b28ce?(_0x41f885[_0x49fa('0x13')]=_0x6b28ce['start'],_0x41f885[_0x49fa('0x20')]=_0x6b28ce[_0x49fa('0x20')]):(_0x4065af[_0x49fa('0x1d')](_0x99e77f['name']),_0x41f885[_0x49fa('0x3c')]());}});}}});}),_0x41863c[_0x49fa('0x43')]['on'](_0x49fa('0xc'),()=>{_0x4065af[_0x49fa('0x30')]>0x0&&_0x41863c[_0x49fa('0x38')](_0x49fa('0x2e'),_0x4a1381=>{for(const [_0x1ea3bb,_0x5ad658]of _0x4065af)'$graveyard'==_0x41863c[_0x49fa('0x3f')]['get'](_0x1ea3bb)['getRange']()[_0x49fa('0x1c')]['rootName']&&(_0x4a1381[_0x49fa('0x35')](_0x1ea3bb,{'range':_0x5ad658}),_0x5ad658['detach']());_0x4065af[_0x49fa('0x3b')]();});});}(_0x26c179);}[_0x49fa('0x42')](){const _0x2a93bd=this['editor'],_0x33b141=_0x2a93bd[_0x49fa('0xf')][_0x49fa('0x43')],_0x245133=_0x2a93bd[_0x49fa('0x33')][_0x49fa('0x49')](_0x50514f);_0x2a93bd[_0x49fa('0xf')][_0x49fa('0x38')](_0x49fa('0x2e'),_0x37c359=>{const _0x3e3bad='user:range:'+_0x245133[_0x49fa('0x32')],_0x29e278=_0x49fa('0x2d')+_0x245133[_0x49fa('0x32')],_0x488199=_0x2a93bd[_0x49fa('0xf')][_0x49fa('0x3f')][_0x49fa('0x27')](_0x3e3bad);if(_0x2a93bd[_0x49fa('0x2a')][_0x49fa('0x10')][_0x49fa('0x1f')]){const _0x52c94a=_0x33b141['selection'][_0x49fa('0x41')](),_0x776679=_0x2a93bd[_0x49fa('0xf')][_0x49fa('0x1a')](_0x33b141[_0x49fa('0x29')][_0x49fa('0x16')]());_0x488199?(_0x37c359['updateMarker'](_0x3e3bad,{'range':_0x52c94a}),_0x37c359[_0x49fa('0x35')](_0x29e278,{'range':_0x776679})):(_0x37c359[_0x49fa('0x21')](_0x3e3bad,{'range':_0x52c94a,'usingOperation':!0x0}),_0x37c359[_0x49fa('0x21')](_0x29e278,{'range':_0x776679,'usingOperation':!0x0}));}else _0x488199&&(_0x37c359[_0x49fa('0x26')](_0x3e3bad),_0x37c359[_0x49fa('0x26')](_0x29e278));});}}