/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x29bd23 from'@ckeditor/ckeditor5-core/src/plugin';import{getRangesWithAttribute as _0x31bb8c}from'./utils';export default class H extends _0x29bd23{['afterInit'](){const _0x36b341=this['editor'];if(!_0x36b341['plugins']['has']('HighlightEditing'))return;const _0x50b72f=_0x36b341['plugins']['get']('TrackChangesEditing');_0x50b72f['enableCommand']('highlight',(_0x4f9414,_0x404bac={})=>{const _0x89a5b0=_0x36b341['model']['document']['selection'],_0x4ed419=_0x89a5b0['getAttribute']('highlight');let _0x514df8,_0x56a9cb=_0x404bac['value'];if(_0x89a5b0['isCollapsed']){const _0x4107cd=_0x89a5b0['getFirstPosition']();if(!_0x89a5b0['hasAttribute']('highlight'))return void _0x4f9414(_0x404bac);{const _0x28cb14=_0x36ffb3=>_0x36ffb3['item']['getAttribute']('highlight')===_0x4ed419,_0x1e092a=_0x4107cd['getLastMatchingPosition'](_0x28cb14,{'direction':'backward'}),_0x28bbea=_0x4107cd['getLastMatchingPosition'](_0x28cb14);_0x514df8=[_0x36b341['model']['createRange'](_0x1e092a,_0x28bbea)],_0x56a9cb==_0x4ed419&&(_0x56a9cb=null);}}else{const _0x32db96=_0x89a5b0['getFirstRange']();_0x514df8=_0x56a9cb?[_0x32db96]:_0x31bb8c('highlight',_0x32db96,_0x36b341['model']);}_0x36b341['model']['change'](()=>{for(const _0x195b50 of _0x514df8)_0x50b72f['markInlineFormat'](_0x195b50,{'commandName':'highlight','commandParams':[{'value':_0x56a9cb}]});});});const {t:t}=_0x36b341['locale'];_0x50b72f['_descriptionFactory']['registerDescriptionCallback'](_0x47beb3=>{const {type:_0xe945c2,data:_0x2a8f0a}=_0x47beb3;if('formatInline'==_0xe945c2&&'highlight'==_0x2a8f0a['commandName']){const _0xff28b=_0x2a8f0a['commandParams'][0x0]['value'];if(_0xff28b){const _0x221e0c=_0x36b341['config']['get']('highlight.options')['find'](_0x535486=>_0x535486['model']==_0xff28b)['title'],_0x286bbd=_0x36b341['locale']['_t'](_0x221e0c)['toLowerCase']();return{'type':'format','content':t('*Format:*\x20%0',t({'string':'%0\x20highlight','id':'FORMAT_CUSTOM_HIGHLIGHT'},_0x286bbd))};}return{'type':'format','content':t('*Remove\x20format:*\x20%0',t({'string':'highlight','id':'FORMAT_HIGHLIGHT'}))};}});}}