/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x193e55 from'@ckeditor/ckeditor5-core/src/plugin';import _0x5ab4db from'@ckeditor/ckeditor5-link/src/findlinkrange';import{getRangesWithAttribute as _0x1cc78c}from'./utils';export default class R extends _0x193e55{['afterInit'](){const _0x3f142a=this['editor'];if(!_0x3f142a['plugins']['has']('LinkEditing'))return;const _0xab5a83=_0x3f142a['plugins']['get']('TrackChangesEditing');_0xab5a83['enableCommand']('link',(_0x2f10d0,_0x2b2446)=>{const _0x198a22=_0x3f142a['model']['document']['selection'];let _0x4f0c07=[];if(_0x198a22['isCollapsed']){if(!_0x198a22['hasAttribute']('linkHref'))return void _0x2f10d0(_0x2b2446);_0x4f0c07=[_0x5ab4db(_0x198a22['getFirstPosition'](),_0x198a22['getAttribute']('linkHref'),_0x3f142a['model'])];}else _0x4f0c07=_0x198a22['getRanges']();_0x3f142a['model']['change'](()=>{for(const _0x16fd70 of _0x4f0c07)_0xab5a83['markInlineFormat'](_0x16fd70,{'commandName':'link','commandParams':[_0x2b2446]});});}),_0xab5a83['enableCommand']('unlink',()=>{const _0x2e654e=this['editor']['model'],_0x224b39=_0x2e654e['document']['selection'];_0x2e654e['change'](()=>{let _0x2dfdf2=[];_0x2dfdf2=_0x224b39['isCollapsed']?[_0x5ab4db(_0x224b39['getFirstPosition'](),_0x224b39['getAttribute']('linkHref'),_0x3f142a['model'])]:_0x1cc78c('linkHref',_0x224b39['getFirstRange'](),_0x3f142a['model']);for(const _0x1333c0 of _0x2dfdf2)_0xab5a83['markInlineFormat'](_0x1333c0,{'commandName':'unlink','commandParams':[]});});}),_0xab5a83['_descriptionFactory']['registerDescriptionCallback'](_0x2058c9=>{const {data:_0x39f8c4}=_0x2058c9,{t:t}=_0x3f142a['locale'];if(_0x39f8c4){if('link'==_0x39f8c4['commandName']){return{'type':'format','content':t('*Set\x20link:*\x20%0','\x22'+_0x39f8c4['commandParams'][0x0]+'\x22')};}return'unlink'==_0x39f8c4['commandName']?{'type':'format','content':t('*Remove\x20link*')}:void 0x0;}});}}