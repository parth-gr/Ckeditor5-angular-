/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x2f7591 from'@ckeditor/ckeditor5-core/src/plugin';import te from'@ckeditor/ckeditor5-table/src/tablewalker';import _0xb8c659 from'@ckeditor/ckeditor5-engine/src/model/liverange';import'../../theme/integrations/table.css';export default class oe extends _0x2f7591{['afterInit'](){const _0x33c034=this['editor'];if(!_0x33c034['plugins']['has']('TableEditing'))return;const {t:t}=_0x33c034['locale'],_0x254ae6=_0x33c034['plugins']['get']('TrackChangesEditing'),_0x2d2743=_0x33c034['plugins']['get']('TableUtils');_0x254ae6['_descriptionFactory']['registerElementLabel']('table',_0x5b2a6d=>t({'string':'table','plural':'%0\x20tables','id':'ELEMENT_TABLE'},_0x5b2a6d)),this['u']=new Set(),_0x33c034['model']['document']['on']('change:data',()=>{const _0x3542da=Array['from'](_0x33c034['model']['document']['differ']['getChangedMarkers']());for(const {name:_0x127553,data:_0x5474dc}of _0x3542da){const {group:_0x3d3be8,id:_0x4d8f4c,subType:_0x1bc78c}=_0x254ae6['_splitMarkerName'](_0x127553);if('suggestion'!=_0x3d3be8)continue;if(null!=_0x5474dc['oldRange'])continue;const _0x44a945=_0x254ae6['getSuggestion'](_0x4d8f4c);'tableRow'!=_0x1bc78c&&'tableColumn'!=_0x1bc78c||this['u']['add'](_0x44a945);}},{'priority':'low'}),_0x254ae6['enableCommand']('insertTable');for(const _0x1f8c3e of['insertTableRowAbove','insertTableRowBelow'])_0x254ae6['enableCommand'](_0x1f8c3e,_0x3ca40c=>{_0x33c034['model']['change'](_0x49b0d3=>{_0x3ca40c();const _0x330721=_0x33c034['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x490136=>_0x490136['is']('tableRow')),_0x43d727='insertTableRowAbove'==_0x1f8c3e?_0x330721['previousSibling']:_0x330721['nextSibling'],_0x148fc3=Array['from'](_0x43d727['getChildren']())['map'](_0x4fcb54=>_0x49b0d3['createRangeOn'](_0x4fcb54));_0x254ae6['markMultiRangeInsertion'](_0x148fc3,'tableRow');});});for(const _0x11bdfa of['insertTableColumnLeft','insertTableColumnRight'])_0x254ae6['enableCommand'](_0x11bdfa,_0x216880=>{_0x33c034['model']['change'](_0x280a70=>{_0x216880();const _0x22e071=_0x33c034['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x3a14cd=>_0x3a14cd['is']('tableCell')),_0x27bde8=_0x22e071['parent']['parent'],{column:_0x3f41d4}=_0x2d2743['getCellLocation'](_0x22e071),_0x1899db=new te(_0x27bde8,{'startRow':0x0,'column':'insertTableColumnLeft'==_0x11bdfa?_0x3f41d4-0x1:_0x3f41d4+0x1,'includeSpanned':!0x1}),_0x2b1c9b=Array['from'](_0x1899db)['map'](_0x288918=>_0x280a70['createRangeOn'](_0x288918['cell']));_0x254ae6['markMultiRangeInsertion'](_0x2b1c9b,'tableColumn');});});for(const _0x395414 of['removeTableRow','removeTableColumn']){const _0x37f52e=_0x395414['substr'](0xb),_0x470930=_0x37f52e['toLowerCase'](),_0x436404=_0x470930['substr'](0x0,0x3)+'span',_0xa12e61='table'+_0x37f52e,_0x3cda4f='min'+_0x37f52e,_0xae8de0='max'+_0x37f52e;_0x254ae6['enableCommand'](_0x395414,()=>{_0x33c034['model']['change'](_0x52fc92=>{const _0x935c79=_0x33c034['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x3bf343=>_0x3bf343['is']('tableCell'));let _0x42e32f;if('removeTableRow'==_0x395414){const {row:_0x344203}=_0x2d2743['getCellLocation'](_0x935c79);_0x42e32f={'startRow':_0x344203,'endRow':_0x344203,'includeSpanned':!0x0};}else{const {column:_0x59f902}=_0x2d2743['getCellLocation'](_0x935c79);_0x42e32f={'startRow':0x0,'column':_0x59f902,'includeSpanned':!0x0};}const _0x1cdadd=new te(_0x935c79['parent']['parent'],_0x42e32f),_0x4cf7d1=Array['from'](_0x1cdadd),_0x3d9102=_0x4cf7d1['filter'](_0x289fec=>_0x289fec['cell']['hasAttribute'](_0x436404)),_0x21a51d=_0x4cf7d1['filter'](_0x3cd540=>!_0x3cd540['cell']['hasAttribute'](_0x436404))['map'](_0x1224fb=>_0x52fc92['createRangeOn'](_0x1224fb['cell'])),_0x289e86=_0x254ae6['markMultiRangeDeletion'](_0x21a51d,_0xa12e61);if(_0x289e86&&('tableRow'==_0x289e86['subType']||'tableColumn'==_0x289e86['subType'])){const _0x51351c=this['T'](_0x289e86);for(const _0x2903eb of _0x3d9102){const _0x13ce4d=_0x52fc92['createRangeOn'](_0x2903eb['cell']),_0x231aa1=_0x2d2743['getCellLocation'](_0x2903eb['cell']),_0x5c065d=_0x2903eb['cell']['getAttribute'](_0x436404)-0x1,_0x3e5ad3=_0x51351c[_0x3cda4f],_0x5899e1=_0x51351c[_0xae8de0];_0x3e5ad3<=_0x231aa1[_0x470930]&&_0x231aa1[_0x470930]+_0x5c065d<=_0x5899e1&&_0x289e86['addRange'](_0x13ce4d);}}});});}_0x254ae6['enableCommand']('setTableRowHeader',(_0x1bbfa4,_0x367879)=>{const _0x2675d3=_0x33c034['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x4d8f2a=>_0x4d8f2a['is']('tableRow')),_0x43ec60=_0x2675d3['parent'],_0x2e5988=_0x43ec60['getAttribute']('headingRows')||0x0,_0xa72e5e=_0x2675d3['index'],_0x56f9ce=_0x367879&&null!==_0x367879['forceValue']?_0x367879['forceValue']:_0x2e5988<=_0xa72e5e;let _0x5b6a37;if(_0x56f9ce){const _0x4f347a=_0x43ec60['getChild'](_0x2e5988);if(_0x2675d3['index']<_0x4f347a['index'])return;_0x5b6a37=_0x33c034['model']['createRange'](_0x33c034['model']['createPositionBefore'](_0x4f347a['getChild'](0x0)),_0x33c034['model']['createPositionAfter'](_0x2675d3['getChild'](_0x2675d3['childCount']-0x1)));}else{const _0x557d67=_0x43ec60['getChild'](_0x2e5988-0x1);if(!_0x557d67)return;_0x5b6a37=_0x33c034['model']['createRange'](_0x33c034['model']['createPositionBefore'](_0x2675d3['getChild'](0x0)),_0x33c034['model']['createPositionAfter'](_0x557d67['getChild'](_0x557d67['childCount']-0x1)));}_0x33c034['model']['change'](()=>{_0x254ae6['markBlockFormat'](_0x5b6a37,{'commandName':'setTableRowHeader','commandParams':[{'forceValue':_0x56f9ce}]},[],'setTableRowHeader');});}),_0x254ae6['enableCommand']('setTableColumnHeader',(_0x2da25e,_0x3a3035)=>{const _0x163423=_0x33c034['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x126afa=>_0x126afa['is']('tableCell')),_0x30f5ca=_0x163423['parent']['parent'],_0xed9025=_0x30f5ca['getAttribute']('headingColumns')||0x0,{column:_0x303cc2}=_0x2d2743['getCellLocation'](_0x163423),_0x21d638=_0x3a3035&&null!==_0x3a3035['forceValue']?_0x3a3035['forceValue']:_0xed9025<=_0x303cc2;let _0x1e280a;const _0x33c784=_0x30f5ca['getChild'](0x0),_0x41d7b7=new te(_0x30f5ca,{'startRow':0x0,'column':_0x303cc2,'includeSpanned':!0x1}),_0x530a1b=Array['from'](_0x41d7b7)[0x0]['cell'];if(_0x21d638){const _0x30c230=_0x33c784['getChild'](_0xed9025);if(_0x530a1b['isBefore'](_0x30c230))return;_0x1e280a=_0x33c034['model']['createRange'](_0x33c034['model']['createPositionBefore'](_0x30c230),_0x33c034['model']['createPositionAfter'](_0x530a1b));}else{const _0x24bf23=_0x33c784['getChild'](_0xed9025-0x1);if(!_0x24bf23)return;_0x1e280a=_0x33c034['model']['createRange'](_0x33c034['model']['createPositionBefore'](_0x530a1b),_0x33c034['model']['createPositionAfter'](_0x24bf23));}_0x33c034['model']['change'](()=>{_0x254ae6['markBlockFormat'](_0x1e280a,{'commandName':'setTableColumnHeader','commandParams':[{'forceValue':_0x21d638}]},[],'setTableColumnHeader');});});for(const _0x4b8c43 of['mergeTableCellUp','mergeTableCellRight','mergeTableCellDown','mergeTableCellLeft']){const _0xfd7006=_0x33c034['commands']['get'](_0x4b8c43);_0x254ae6['enableCommand'](_0x4b8c43,()=>{const _0x34952d=_0x33c034['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x17de0b=>_0x17de0b['is']('tableCell')),_0xb3d01d=_0xfd7006['value'];_0x33c034['model']['change'](_0x57fdee=>{_0x254ae6['markBlockFormat'](_0x57fdee['createRangeOn'](_0x34952d),{'commandName':_0x4b8c43,'commandParams':[]},[_0xb3d01d],_0x4b8c43);});});}for(const _0x5c406e of['splitTableCellVertically','splitTableCellHorizontally']){const _0x37429b=_0x33c034['commands']['get'](_0x5c406e);_0x254ae6['enableCommand'](_0x5c406e,()=>{const _0x21ea8b=_0x33c034['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x439eac=>_0x439eac['is']('tableCell')),_0x2f5657=_0x21ea8b['parent']['parent'],{column:_0x354b11,row:_0x5316e1}=_0x2d2743['getCellLocation'](_0x21ea8b);let _0x59ce73=[];if('horizontally'==_0x37429b['direction']){const _0x3960a9=new te(_0x2f5657,{'startRow':_0x5316e1,'endRow':_0x5316e1,'includeSpanned':!0x0});_0x59ce73=Array['from'](_0x3960a9)['map'](_0x2ece71=>_0x2ece71['cell']);}else{const _0x63aae5=new te(_0x2f5657,{'column':_0x354b11,'includeSpanned':!0x0});_0x59ce73=Array['from'](_0x63aae5)['map'](_0x35f9b8=>_0x35f9b8['cell']);}_0x33c034['model']['change'](_0x4a8d81=>{_0x254ae6['markBlockFormat'](_0x4a8d81['createRangeOn'](_0x21ea8b),{'commandName':_0x5c406e,'commandParams':[]},_0x59ce73,_0x5c406e);});});}_0x33c034['editing']['downcastDispatcher']['on']('addMarker:suggestion',(_0x26d7bc,_0x2f899a,_0xc2c844)=>{const {type:_0x3ad869,subType:_0xaf41fb,id:_0x1ac6c6}=_0x254ae6['_splitMarkerName'](_0x2f899a['markerName']),_0x343bcb=_0x254ae6['getSuggestion'](_0x1ac6c6);if(_0x343bcb['data']&&'setTableColumnHeader'==_0x343bcb['data']['commandName'])return;const _0xb9897f=_0x2f899a['markerRange']['start']['nodeAfter'];if(!_0xb9897f||!_0xb9897f['is']('tableRow')&&!_0xb9897f['is']('tableCell'))return;if(_0x2f899a['item'])return void _0x26d7bc['stop']();if(!_0xc2c844['consumable']['consume'](_0x2f899a['markerRange'],_0x26d7bc['name']))return;const _0x4788ee=Array['from'](_0x2f899a['markerRange']['getItems']())['filter'](_0x4d4cc9=>_0x4d4cc9['is']('tableCell'));for(const _0x546fd1 of _0x4788ee){const _0x5c7ee7=_0xc2c844['mapper']['toViewElement'](_0x546fd1);'formatBlock'==_0x3ad869?_0xc2c844['writer']['addClass']('ck-suggestion-marker-'+_0x3ad869+'-cell',_0x5c7ee7):_0xc2c844['writer']['addClass']('ck-suggestion-marker-'+_0x3ad869+'-'+_0xaf41fb,_0x5c7ee7),_0xc2c844['mapper']['bindElementToMarker'](_0x5c7ee7,_0x2f899a['markerName']),_0x254ae6['activeMarkers']['includes'](_0x2f899a['markerName'])?_0xc2c844['writer']['addClass']('ck-suggestion-marker--active',_0x5c7ee7):_0xc2c844['writer']['removeClass']('ck-suggestion-marker--active',_0x5c7ee7);}},{'priority':'highest'}),_0x33c034['editing']['downcastDispatcher']['on']('addMarker:suggestion',(_0xf04866,_0x5c13f5,_0x325d42)=>{const {type:_0x3b0e13,id:_0x2f3735}=_0x254ae6['_splitMarkerName'](_0x5c13f5['markerName']),_0x92998=_0x254ae6['getSuggestion'](_0x2f3735);if(!_0x92998['data']||'setTableColumnHeader'!=_0x92998['data']['commandName'])return;if(_0x5c13f5['item'])return void _0xf04866['stop']();if(!_0x325d42['consumable']['consume'](_0x5c13f5['markerRange'],_0xf04866['name']))return;const _0xa3b68e=_0x5c13f5['markerRange']['start']['nodeAfter'],_0x287aae=_0x5c13f5['markerRange']['end']['nodeBefore'],_0x27bde4=_0xa3b68e['parent']['parent'],{column:_0x2580f6}=_0x2d2743['getCellLocation'](_0xa3b68e),{column:_0x51b55e}=_0x2d2743['getCellLocation'](_0x287aae);for(let _0xcab5c3=_0x2580f6;_0xcab5c3<=_0x51b55e;_0xcab5c3++){const _0x12ba76=new te(_0x27bde4,{'column':_0xcab5c3,'includeSpanned':!0x1});for(const _0x35f350 of _0x12ba76){const _0x504cfe=_0x35f350['cell'],_0x19245a=_0x325d42['mapper']['toViewElement'](_0x504cfe);_0x325d42['writer']['addClass']('ck-suggestion-marker-'+_0x3b0e13+'-cell',_0x19245a),_0x325d42['mapper']['bindElementToMarker'](_0x19245a,_0x5c13f5['markerName']),_0x254ae6['activeMarkers']['includes'](_0x5c13f5['markerName'])?_0x325d42['writer']['addClass']('ck-suggestion-marker--active',_0x19245a):_0x325d42['writer']['removeClass']('ck-suggestion-marker--active',_0x19245a);}}},{'priority':'highest'}),_0x33c034['editing']['downcastDispatcher']['on']('removeMarker:suggestion',(_0x40a911,_0x15cb02,_0x24f325)=>{const {type:_0x4facc9,subType:_0x4b32a5}=_0x254ae6['_splitMarkerName'](_0x15cb02['markerName']),_0xb540c8=_0x24f325['mapper']['markerNameToElements'](_0x15cb02['markerName']);if(_0xb540c8)for(const _0x5c737e of _0xb540c8)(_0x5c737e['is']('td')||_0x5c737e['is']('th'))&&('formatBlock'==_0x4facc9?_0x24f325['writer']['removeClass']('ck-suggestion-marker-'+_0x4facc9+'-cell',_0x5c737e):_0x24f325['writer']['removeClass']('ck-suggestion-marker-'+_0x4facc9+'-'+_0x4b32a5,_0x5c737e),_0x24f325['writer']['removeClass']('ck-suggestion-marker--active',_0x5c737e),_0x24f325['mapper']['unbindElementFromMarkerName'](_0x5c737e,_0x15cb02['markerName']));},{'priority':'highest'}),_0x254ae6['_descriptionFactory']['registerDescriptionCallback'](_0x394b01=>{if('insertion'!=_0x394b01['type']&&'deletion'!=_0x394b01['type'])return;const _0xc2e5a0=_0x394b01['getContainedElement']();if(null!=_0xc2e5a0&&_0xc2e5a0['is']('table')){if('insertion'==_0x394b01['type']){const _0x531cab=_0x394b01['getItems']()['filter'](_0x34cb10=>_0x34cb10['is']('textProxy'))['map'](_0x2a09cd=>_0x2a09cd['data']);if(_0x531cab['length'])return{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20*with\x20text*\x20%0','id':'ELEMENT_TABLE_WITH_TEXT'},'\x22'+_0x531cab['join']('\x20')+'\x22'))};}if('deletion'==_0x394b01['type']){const _0x17f694=_0x394b01['getItems']()['filter'](_0x5a7a95=>_0x5a7a95['is']('textProxy'))['map'](_0x4eec15=>_0x4eec15['data']);if(_0x17f694['length'])return{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20*with\x20text*\x20%0','id':'ELEMENT_TABLE_WITH_TEXT'},'\x22'+_0x17f694['join']('\x20')+'\x22'))};}}}),_0x254ae6['_descriptionFactory']['registerDescriptionCallback'](_0x193f3b=>{if('tableRow'==_0x193f3b['subType']){const _0x1379f1=_0x193f3b['getItems']()['filter'](_0x23df52=>_0x23df52['is']('textProxy'))['map'](_0x464ce7=>_0x464ce7['data']),_0x529f19=this['T'](_0x193f3b),_0x3b1902=_0x529f19['maxRow']-_0x529f19['minRow']+0x1;if('insertion'==_0x193f3b['type'])return _0x1379f1['length']?{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20row\x20*with\x20text*\x20%1','plural':'%0\x20table\x20rows\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_ROW_WITH_TEXT'},[_0x3b1902,'\x22'+_0x1379f1['join']('\x20')+'\x22']))}:{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20row','plural':'%0\x20table\x20rows','id':'ELEMENT_TABLE_ROW'},_0x3b1902))};if('deletion'==_0x193f3b['type'])return _0x1379f1['length']?{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20row\x20*with\x20text*\x20%1','plural':'%0\x20table\x20rows\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_ROW_WITH_TEXT'},[_0x3b1902,'\x22'+_0x1379f1['join']('\x20')+'\x22']))}:{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20row','plural':'%0\x20table\x20rows','id':'ELEMENT_TABLE_ROW'},_0x3b1902))};}if('tableColumn'==_0x193f3b['subType']){const _0x439af6=_0x193f3b['getItems']()['filter'](_0x30fd14=>_0x30fd14['is']('textProxy'))['map'](_0x76bfe4=>_0x76bfe4['data']),_0x54fbd6=this['T'](_0x193f3b),_0x549596=_0x54fbd6['maxColumn']-_0x54fbd6['minColumn']+0x1;if('insertion'==_0x193f3b['type'])return _0x439af6['length']?{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20column\x20*with\x20text*\x20%1','plural':'%0\x20table\x20columns\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_COLUMN_WITH_TEXT'},[_0x549596,'\x22'+_0x439af6['join']('\x20')+'\x22']))}:{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20column','plural':'%0\x20table\x20columns','id':'ELEMENT_TABLE_COLUMN'},_0x549596))};if('deletion'==_0x193f3b['type'])return _0x439af6['length']?{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20column\x20*with\x20text*\x20%1','plural':'%0\x20table\x20columns\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_COLUMN_WITH_TEXT'},[_0x549596,'\x22'+_0x439af6['join']('\x20')+'\x22']))}:{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20column','plural':'%0\x20table\x20columns','id':'ELEMENT_TABLE_COLUMN'},_0x549596))};}}),_0x254ae6['_descriptionFactory']['registerDescriptionCallback'](_0x3f28bf=>{const {data:_0xb155b8}=_0x3f28bf;if(_0xb155b8){if('setTableRowHeader'==_0xb155b8['commandName']){const _0x4ae95f=_0xb155b8['commandParams'][0x0]['forceValue'];return _0x3142fb(t(_0x4ae95f?{'string':'header\x20row','id':'FORMAT_HEADER_ROW'}:{'string':'regular\x20row','id':'FORMAT_REGULAR_ROW'}));}if('setTableColumnHeader'==_0xb155b8['commandName']){const _0x40c600=_0xb155b8['commandParams'][0x0]['forceValue'];return _0x3142fb(t(_0x40c600?{'string':'header\x20column','id':'FORMAT_HEADER_COLUMN'}:{'string':'regular\x20column','id':'FORMAT_REGULAR_COLUMN'}));}}function _0x3142fb(_0x1116ef){return{'type':'format','content':t('*Format:*\x20%0',_0x1116ef)};}}),_0x254ae6['_descriptionFactory']['registerDescriptionCallback'](_0x5bda7a=>{const {data:_0x20fccc}=_0x5bda7a;if(_0x20fccc)return'mergeTableCellUp'==_0x20fccc['commandName']?{'type':'format','content':t('*Merge\x20cell:*\x20up')}:'mergeTableCellRight'==_0x20fccc['commandName']?{'type':'format','content':t('*Merge\x20cell:*\x20right')}:'mergeTableCellDown'==_0x20fccc['commandName']?{'type':'format','content':t('*Merge\x20cell:*\x20down')}:'mergeTableCellLeft'==_0x20fccc['commandName']?{'type':'format','content':t('*Merge\x20cell:*\x20left')}:void 0x0;});for(const _0x10b613 of['mergeTableCellUp','mergeTableCellRight','mergeTableCellDown','mergeTableCellLeft'])_0x254ae6['_suggestionFactory']['registerCustomCallback']('formatBlock',_0x10b613,'accept',_0x4f2b93);_0x254ae6['_descriptionFactory']['registerDescriptionCallback'](_0x420acf=>{const {data:_0x588ce4}=_0x420acf;if(_0x588ce4)return'splitTableCellVertically'==_0x588ce4['commandName']?{'type':'format','content':t('*Split\x20cell:*\x20vertically')}:'splitTableCellHorizontally'==_0x588ce4['commandName']?{'type':'format','content':t('*Split\x20cell:*\x20horizontally')}:void 0x0;});for(const _0x52c23d of['splitTableCellVertically','splitTableCellHorizontally'])_0x254ae6['_suggestionFactory']['registerCustomCallback']('formatBlock',_0x52c23d,'accept',_0x4f2b93);const _0x20dcc7=(_0x3c3597,_0x2e8145)=>{const _0x4d2ace=_0x2e8145['createRangeOn'](_0x3c3597),_0x14f6e4=_0x3c3597['parent']['parent'],_0x4f8b5f=_0x2d2743['getCellLocation'](_0x3c3597);for(const _0x41cfc6 of this['u']){const _0x5ab939=_0x41cfc6['subType']['substr'](0x5),_0x5b8589=_0x5ab939['toLowerCase'](),_0x410022=_0x5b8589['substr'](0x0,0x3)+'span',_0x5a1222='min'+_0x5ab939,_0xe72c9b='max'+_0x5ab939;if(!_0x41cfc6['isInContent'])continue;if(_0x14f6e4!=_0x41cfc6['getFirstRange']()['start']['parent']['parent'])continue;if(_0x41cfc6['isIntersectingWithRange'](_0x4d2ace))continue;const _0xa18cc2=_0x3c3597['hasAttribute'](_0x410022)?_0x3c3597['getAttribute'](_0x410022)-0x1:0x0,_0x3885a6=this['T'](_0x41cfc6),_0x16197f=_0x3885a6[_0x5a1222],_0x10418c=_0x3885a6[_0xe72c9b];_0x16197f<=_0x4f8b5f[_0x5b8589]&&_0x4f8b5f[_0x5b8589]+_0xa18cc2<=_0x10418c&&_0x41cfc6['addRange'](_0x4d2ace);}};_0x33c034['model']['document']['registerPostFixer'](_0x5d9ce1=>{for(const _0x379634 of _0x33c034['model']['document']['differ']['getChanges']())if('insert'==_0x379634['type'])if('tableRow'==_0x379634['name'])for(const _0x46fa54 of _0x379634['position']['nodeAfter']['getChildren']())_0x20dcc7(_0x46fa54,_0x5d9ce1);else'tableCell'==_0x379634['name']&&_0x20dcc7(_0x379634['position']['nodeAfter'],_0x5d9ce1);});for(const _0x1a8ed7 of['mergeTableCellUp','mergeTableCellDown','mergeTableCellLeft','mergeTableCellRight']){const _0x4f0ade=_0x33c034['commands']['get'](_0x1a8ed7);_0x4f0ade['on']('set:isEnabled',(_0x2df0f6,_0x3886df,_0x30d51c)=>{if(_0x30d51c){const _0x2ce31d=_0x33c034['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x17bc70=>_0x17bc70['is']('tableCell'));this['g'](_0x4f0ade['value'],_0x2ce31d)||(_0x2df0f6['return']=!0x1,_0x2df0f6['stop']());}},{'priority':'low'});}function _0x4f2b93(_0x28ec73,_0x57bd18){_0x33c034['model']['change'](_0x52a963=>{const {commandName:_0x5c3620,commandParams:_0x30f2a0}=_0x57bd18;let _0x38bf88=_0x28ec73[0x0]['end']['nodeBefore'];_0x30f2a0&&_0x30f2a0[0x0]&&!0x1===_0x30f2a0[0x0]['forceValue']&&(_0x38bf88=_0x28ec73[0x0]['start']['nodeAfter']);const _0x239856=_0x52a963['createRangeIn'](_0x38bf88);if('$graveyard'==_0x239856['root']['rootName'])return;const _0x16ba90=_0xb8c659['fromRange'](_0x33c034['model']['document']['selection']['getFirstRange']());_0x52a963['setSelection'](_0x239856),_0x33c034['commands']['get'](_0x5c3620)['refresh'](),_0x30f2a0['push']({'forceDefaultExecution':!0x0}),_0x33c034['execute'](_0x5c3620,..._0x30f2a0),'$graveyard'!=_0x16ba90['root']['rootName']&&_0x52a963['setSelection'](_0x16ba90),_0x16ba90['detach']();});}function _0x2a6df7(_0x960b99){const _0x3a0e92=_0xb8c659['fromRange'](_0x33c034['model']['document']['selection']['getFirstRange']()),_0x437727=_0x33c034['model']['createBatch']();_0x33c034['model']['enqueueChange'](_0x437727,_0xdb474d=>{_0xdb474d['setSelection'](_0x960b99),_0x33c034['commands']['get']('removeTableRow')['refresh'](),_0x33c034['execute']('removeTableRow',{'forceDefaultExecution':!0x0}),_0x33c034['model']['enqueueChange'](()=>{_0x33c034['model']['enqueueChange'](_0x437727,_0x566a1c=>{if('$graveyard'!=_0x3a0e92['root']['rootName'])_0x566a1c['setSelection'](_0x3a0e92);else{const _0x46570d=_0x33c034['model']['document']['selection']['getFirstPosition']();_0x46570d['nodeAfter']&&_0x46570d['nodeAfter']['is']('tableCell')&&_0x566a1c['setSelection'](_0x46570d['nodeAfter'],0x0);}_0x3a0e92['detach']();});});});}function _0x55ce38(_0x4b3c26){_0x33c034['model']['change'](_0x2f996a=>{const _0x3afc8a=_0xb8c659['fromRange'](_0x33c034['model']['document']['selection']['getFirstRange']()),_0x30baf2=[];for(const _0x333dee of _0x4b3c26)for(const _0x59968a of _0x333dee['getItems']({'shallow':!0x0}))_0x30baf2['push'](_0x59968a);for(const _0x4ab36e of _0x30baf2)'$graveyard'!=_0x4ab36e['root']['rootName']&&(_0x2f996a['setSelection'](_0x2f996a['createPositionAt'](_0x4ab36e,0x0)),_0x33c034['commands']['get']('removeTableColumn')['refresh'](),_0x33c034['execute']('removeTableColumn',{'forceDefaultExecution':!0x0}));'$graveyard'!=_0x3afc8a['root']['rootName']&&_0x2f996a['setSelection'](_0x3afc8a),_0x3afc8a['detach']();});}function _0x197be4(_0x5bfa75,_0x3075b4){return _0x3075b4['every'](_0x4e5dd8=>_0x5bfa75['some'](_0x53eb96=>_0x53eb96['end']['isEqual'](_0x4e5dd8['start'])||_0x4e5dd8['end']['isEqual'](_0x53eb96['start'])));}function _0x54a026(_0x172c90,_0x465b7a){return _0x172c90['some'](_0x564f37=>_0x465b7a['some'](_0xf276ea=>_0x564f37['end']['isTouching'](_0xf276ea['start'])));}_0x254ae6['_suggestionFactory']['registerCustomCallback']('formatBlock','setTableRowHeader','accept',_0x4f2b93),_0x254ae6['_suggestionFactory']['registerCustomCallback']('formatBlock','setTableColumnHeader','accept',_0x4f2b93),_0x254ae6['_suggestionFactory']['registerCustomCallback']('insertion','tableRow','discard',_0x2a6df7),_0x254ae6['_suggestionFactory']['registerCustomCallback']('deletion','tableRow','accept',_0x2a6df7),_0x254ae6['_suggestionFactory']['registerCustomCallback']('insertion','tableColumn','discard',_0x55ce38),_0x254ae6['_suggestionFactory']['registerCustomCallback']('deletion','tableColumn','accept',_0x55ce38),_0x254ae6['_suggestionFactory']['registerCustomCallback']('insertion','tableColumn','join',_0x197be4),_0x254ae6['_suggestionFactory']['registerCustomCallback']('deletion','tableColumn','join',_0x197be4),_0x254ae6['_suggestionFactory']['registerCustomCallback']('insertion','tableRow','join',_0x54a026),_0x254ae6['_suggestionFactory']['registerCustomCallback']('deletion','tableRow','join',_0x54a026);const _0x186498=_0x33c034['plugins']['get']('TableSelection');_0x33c034['commands']['get']('trackChanges')['on']('change:value',(_0xb7682,_0x3339bc,_0x3e419b)=>{_0x3e419b?(_0x186498['forceDisabled']('trackChanges'),_0x33c034['model']['change'](_0x3eb2c2=>{let _0x36a485=_0x33c034['model']['document']['selection']['getFirstPosition']();if(_0x36a485['nodeAfter']&&_0x36a485['nodeAfter']['is']('tableCell')){_0x36a485=_0x3eb2c2['createPositionAt'](_0x36a485['nodeAfter'],0x0);const _0x36e99b=_0x33c034['model']['schema']['getNearestSelectionRange'](_0x36a485);_0x3eb2c2['setSelection'](_0x36e99b);}})):_0x186498['clearForceDisabled']('trackChanges');});}['T'](_0x5847fc){const _0x4486ff=this['editor']['plugins']['get']('TableUtils');let _0x47b240=Number['MAX_SAFE_INTEGER'],_0x5c6336=Number['MIN_SAFE_INTEGER'],_0x84eacf=Number['MAX_SAFE_INTEGER'],_0x5167ae=Number['MIN_SAFE_INTEGER'];for(const _0x11f15e of _0x5847fc['getRanges']()){const _0x1a4ec2=_0x11f15e['start']['nodeAfter'],{row:_0x4a0b01,column:_0x53e159}=_0x4486ff['getCellLocation'](_0x1a4ec2),_0x5dfc09=_0x1a4ec2['hasAttribute']('rowspan')?_0x1a4ec2['getAttribute']('rowspan')-0x1:0x0,_0x1e6fea=_0x1a4ec2['hasAttribute']('colspan')?_0x1a4ec2['getAttribute']('colspan')-0x1:0x0;_0x47b240=_0x4a0b01<_0x47b240?_0x4a0b01:_0x47b240,_0x5c6336=_0x4a0b01+_0x5dfc09>_0x5c6336?_0x4a0b01+_0x5dfc09:_0x5c6336,_0x84eacf=_0x53e159<_0x84eacf?_0x53e159:_0x84eacf,_0x5167ae=_0x53e159+_0x1e6fea>_0x5167ae?_0x53e159+_0x1e6fea:_0x5167ae;}return{'minRow':_0x47b240,'maxRow':_0x5c6336,'minColumn':_0x84eacf,'maxColumn':_0x5167ae};}['g'](_0x514621,_0xcc92e9){const _0x28c80a=this['editor']['plugins']['get']('TrackChangesEditing'),_0xa90cd9=this['editor']['model']['createRangeOn'](_0x514621),_0x112113=this['editor']['model']['createRangeOn'](_0xcc92e9),_0x5e9d3a=new Set(),_0x5d1dc9=new Set();for(const _0x1760a2 of _0x28c80a['getSuggestions']())if(('insertion'==_0x1760a2['type']||'deletion'==_0x1760a2['type'])&&_0x1760a2['isInContent'])for(const _0x1e2e11 of _0x1760a2['getRanges']())_0x1e2e11['containsRange'](_0xa90cd9,!0x0)&&_0x5e9d3a['add'](_0x1760a2['type']+':'+_0x1760a2['author']['id']),_0x1e2e11['containsRange'](_0x112113,!0x0)&&_0x5d1dc9['add'](_0x1760a2['type']+':'+_0x1760a2['author']['id']);if(_0x5e9d3a['size']!=_0x5d1dc9['size'])return!0x1;for(const _0x46f4a9 of _0x5e9d3a)if(!_0x5d1dc9['has'](_0x46f4a9))return!0x1;return!0x0;}}